import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
const AttendanceStats = ({ attendanceReport, loading, error, searchTerm, statusFilter, currentPage, totalPages, onSearchChange, onStatusFilterChange, onPageChange, onExport, }) => {
    const handlePrevious = () => onPageChange(Math.max(currentPage - 1, 1));
    const handleNext = () => onPageChange(Math.min(currentPage + 1, totalPages));
    return (_jsxs("div", { className: "space-y-6", children: [_jsx("div", { className: "bg-gray-50 rounded-xl p-6 space-y-4", children: _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs("div", { className: "space-y-2", children: [_jsx("label", { htmlFor: "search", className: "block text-sm font-medium text-gray-700", children: "Search" }), _jsx("input", { id: "search", type: "text", placeholder: "Search by student or session...", className: "w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors", value: searchTerm, onChange: (e) => onSearchChange(e.target.value) })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { htmlFor: "status-filter", className: "block text-sm font-medium text-gray-700", children: "Status Filter" }), _jsxs("select", { id: "status-filter", value: statusFilter, onChange: (e) => onStatusFilterChange(e.target.value), className: "w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors", children: [_jsx("option", { value: "", children: "All Statuses" }), _jsx("option", { value: "Present", children: "Present" }), _jsx("option", { value: "Absent", children: "Absent" }), _jsx("option", { value: "Late", children: "Late" })] })] }), _jsxs("div", { className: "space-y-2", children: [_jsx("label", { className: "block text-sm font-medium text-gray-700", children: "Export" }), _jsx("button", { onClick: onExport, className: "w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-200", children: "\u2B07\uFE0F Export CSV" })] })] }) }), _jsx("div", { className: "bg-white border border-gray-200 rounded-xl overflow-hidden", children: loading ? (_jsx("div", { className: "p-8 text-center", children: _jsx("p", { className: "text-gray-600", children: "Loading attendance records..." }) })) : error ? (_jsx("div", { className: "p-8 text-center", children: _jsx("p", { className: "text-red-600", children: error }) })) : (_jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full", children: [_jsx("thead", { className: "bg-purple-100 border-b border-purple-200", children: _jsxs("tr", { children: [_jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Student" }), _jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Student ID" }), _jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Session" }), _jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Check In" }), _jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Check Out" }), _jsx("th", { className: "text-left px-6 py-4 font-semibold text-purple-800", children: "Status" })] }) }), _jsx("tbody", { className: "divide-y divide-gray-200", children: attendanceReport.length > 0 ? (attendanceReport.map((record) => (_jsx(AttendanceRow, { record: record }, `${record.id}-${record.check_in_time}`)))) : (_jsx("tr", { children: _jsx("td", { colSpan: 6, className: "px-6 py-12 text-center text-gray-500", children: "No attendance records found." }) })) })] }) })) }), totalPages > 1 && (_jsxs("div", { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-4", children: [_jsx("button", { onClick: handlePrevious, disabled: currentPage === 1, className: "bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200", children: "Previous" }), _jsxs("span", { className: "text-gray-600 font-medium", children: ["Page ", currentPage, " of ", totalPages] }), _jsx("button", { onClick: handleNext, disabled: currentPage === totalPages, className: "bg-purple-600 hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-medium transition-colors duration-200", children: "Next" })] }))] }));
};
// Extracted row component for better readability
const AttendanceRow = ({ record }) => {
    const statusClass = {
        present: 'bg-green-100 text-green-800',
        absent: 'bg-red-100 text-red-800',
        late: 'bg-yellow-100 text-yellow-800',
        default: 'bg-gray-100 text-gray-800',
    };
    const getStatusClass = () => {
        const status = record.status.toLowerCase();
        if (status === 'present')
            return statusClass.present;
        if (status === 'absent')
            return statusClass.absent;
        if (status === 'late')
            return statusClass.late;
        return statusClass.default;
    };
    return (_jsxs("tr", { className: "even:bg-gray-50 odd:bg-white", children: [_jsx("td", { className: "px-6 py-4 text-gray-900", children: record.student?.user?.username || 'N/A' }), _jsx("td", { className: "px-6 py-4 text-gray-900", children: record.student?.student_id || 'N/A' }), _jsx("td", { className: "px-6 py-4 text-gray-900", children: record.session?.class_name || 'N/A' }), _jsx("td", { className: "px-6 py-4 text-gray-900", children: record.check_in_time ? new Date(record.check_in_time).toLocaleString() : '-' }), _jsx("td", { className: "px-6 py-4 text-gray-900", children: record.check_out_time ? new Date(record.check_out_time).toLocaleString() : '-' }), _jsx("td", { className: "px-6 py-4", children: _jsx("span", { className: `inline-flex px-2 py-1 text-xs font-semibold rounded-full capitalize ${getStatusClass()}`, children: record.status }) })] }));
};
export default AttendanceStats;
